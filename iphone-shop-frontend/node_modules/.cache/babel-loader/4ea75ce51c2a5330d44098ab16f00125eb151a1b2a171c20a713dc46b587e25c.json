{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useMutation } from '@apollo/client';\nimport { GET_PRODUCTS } from '../graphql/queries';\nimport { CREATE_PRODUCT, UPDATE_PRODUCT, DELETE_PRODUCT } from '../graphql/mutations';\nexport const useProducts = (filters = {}) => {\n  _s();\n  const {\n    loading,\n    error,\n    data,\n    refetch\n  } = useQuery(GET_PRODUCTS, {\n    variables: filters\n  });\n  const [createProduct] = useMutation(CREATE_PRODUCT); // Mutation hook for creating a product\n  const [updateProduct] = useMutation(UPDATE_PRODUCT); // Mutation hook for updating a product\n  const [deleteProduct] = useMutation(DELETE_PRODUCT); // Mutation hook for deleting a product\n\n  const handleCreate = async productData => {\n    // Function to handle product creation\n    try {\n      const result = await createProduct({\n        variables: {\n          ...productData,\n          price: parseFloat(productData.price),\n          stock: parseInt(productData.stock)\n        }\n      });\n      refetch();\n      return {\n        success: true,\n        data: result.data.createProduct\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const handleUpdate = async (id, productData) => {\n    // Function to handle product update\n    try {\n      const result = await updateProduct({\n        variables: {\n          id,\n          ...productData,\n          price: productData.price ? parseFloat(productData.price) : undefined,\n          stock: productData.stock ? parseInt(productData.stock) : undefined\n        }\n      });\n      refetch();\n      return {\n        success: true,\n        data: result.data.updateProduct\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const handleDelete = async id => {\n    // Function to handle product deletion\n    try {\n      const result = await deleteProduct({\n        variables: {\n          id\n        }\n      });\n      refetch();\n      return {\n        success: true,\n        data: result.data.deleteProduct\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  return {\n    //\n    products: (data === null || data === void 0 ? void 0 : data.products) || [],\n    categories: (data === null || data === void 0 ? void 0 : data.categories) || [],\n    loading,\n    error,\n    refetch,\n    createProduct: handleCreate,\n    updateProduct: handleUpdate,\n    deleteProduct: handleDelete\n  };\n};\n_s(useProducts, \"TXq/Cw+yhLI2rC9TUHngO0Jtb3k=\", false, function () {\n  return [useQuery, useMutation, useMutation, useMutation];\n});","map":{"version":3,"names":["useQuery","useMutation","GET_PRODUCTS","CREATE_PRODUCT","UPDATE_PRODUCT","DELETE_PRODUCT","useProducts","filters","_s","loading","error","data","refetch","variables","createProduct","updateProduct","deleteProduct","handleCreate","productData","result","price","parseFloat","stock","parseInt","success","err","message","handleUpdate","id","undefined","handleDelete","products","categories"],"sources":["D:/Hiredly Evaluation Task/iphone-shop-frontend/src/hooks/useProducts.js"],"sourcesContent":["import { useQuery, useMutation } from '@apollo/client';\r\nimport { GET_PRODUCTS } from '../graphql/queries';\r\nimport { CREATE_PRODUCT, UPDATE_PRODUCT, DELETE_PRODUCT } from '../graphql/mutations';\r\n\r\nexport const useProducts = (filters = {}) => {\r\n  const { loading, error, data, refetch } = useQuery(GET_PRODUCTS, {\r\n    variables: filters,\r\n  });\r\n\r\n  const [createProduct] = useMutation(CREATE_PRODUCT); // Mutation hook for creating a product\r\n  const [updateProduct] = useMutation(UPDATE_PRODUCT); // Mutation hook for updating a product\r\n  const [deleteProduct] = useMutation(DELETE_PRODUCT); // Mutation hook for deleting a product\r\n\r\n  const handleCreate = async (productData) => { // Function to handle product creation\r\n    try {\r\n      const result = await createProduct({\r\n        variables: {\r\n          ...productData,\r\n          price: parseFloat(productData.price),\r\n          stock: parseInt(productData.stock),\r\n        },\r\n      });\r\n      refetch();\r\n      return { success: true, data: result.data.createProduct };\r\n    } catch (err) {\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (id, productData) => { // Function to handle product update\r\n    try {\r\n      const result = await updateProduct({\r\n        variables: {\r\n          id,\r\n          ...productData,\r\n          price: productData.price ? parseFloat(productData.price) : undefined,\r\n          stock: productData.stock ? parseInt(productData.stock) : undefined,\r\n        },\r\n      });\r\n      refetch();\r\n      return { success: true, data: result.data.updateProduct };\r\n    } catch (err) {\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => { // Function to handle product deletion\r\n    try {\r\n      const result = await deleteProduct({ variables: { id } });\r\n      refetch();\r\n      return { success: true, data: result.data.deleteProduct };\r\n    } catch (err) {\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  return {  //\r\n    products: data?.products || [],\r\n    categories: data?.categories || [],\r\n    loading,\r\n    error,\r\n    refetch,\r\n    createProduct: handleCreate,\r\n    updateProduct: handleUpdate,\r\n    deleteProduct: handleDelete,\r\n  };\r\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}