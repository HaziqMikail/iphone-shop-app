{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useQuery, useMutation } from '@apollo/client';\nimport { GET_FAVORITES } from '../graphql/queries';\nimport { ADD_FAVORITE, REMOVE_FAVORITE } from '../graphql/mutations';\nexport const useFavorites = userId => {\n  _s();\n  const {\n    data,\n    refetch\n  } = useQuery(GET_FAVORITES, {\n    variables: {\n      userId\n    }\n  });\n  const [addFavoriteMutation] = useMutation(ADD_FAVORITE); // Mutation hook for adding a favorite\n  const [removeFavoriteMutation] = useMutation(REMOVE_FAVORITE); // Mutation hook for removing a favorite\n\n  const favorites = (data === null || data === void 0 ? void 0 : data.favorites) || []; // List of favorite products\n  const favoriteIds = favorites.map(f => f.product.id); // List of favorite product IDs\n\n  const addFavorite = async productId => {\n    try {\n      await addFavoriteMutation({\n        variables: {\n          productId,\n          userId\n        }\n      }); // Call addFavorite mutation\n      refetch();\n      return {\n        success: true\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const removeFavorite = async productId => {\n    // Function to handle removing a favorite\n    try {\n      await removeFavoriteMutation({\n        variables: {\n          productId,\n          userId\n        }\n      }); // Call removeFavorite mutation\n      refetch();\n      return {\n        success: true\n      };\n    } catch (err) {\n      return {\n        success: false,\n        error: err.message\n      };\n    }\n  };\n  const toggleFavorite = async productId => {\n    // Function to handle toggling a favorite\n    if (favoriteIds.includes(productId)) {\n      return await removeFavorite(productId);\n    } else {\n      return await addFavorite(productId);\n    }\n  };\n  const isFavorite = productId => favoriteIds.includes(productId);\n  return {\n    favorites,\n    favoriteIds,\n    addFavorite,\n    removeFavorite,\n    toggleFavorite,\n    isFavorite\n  };\n};\n_s(useFavorites, \"mtI9H4Xgwen3EF4YU79TaCDSi+E=\", false, function () {\n  return [useQuery, useMutation, useMutation];\n});","map":{"version":3,"names":["useQuery","useMutation","GET_FAVORITES","ADD_FAVORITE","REMOVE_FAVORITE","useFavorites","userId","_s","data","refetch","variables","addFavoriteMutation","removeFavoriteMutation","favorites","favoriteIds","map","f","product","id","addFavorite","productId","success","err","error","message","removeFavorite","toggleFavorite","includes","isFavorite"],"sources":["D:/Hiredly Evaluation Task/iphone-shop-frontend/src/hooks/useFavorites.js"],"sourcesContent":["import { useQuery, useMutation } from '@apollo/client';\r\nimport { GET_FAVORITES } from '../graphql/queries';\r\nimport { ADD_FAVORITE, REMOVE_FAVORITE } from '../graphql/mutations';\r\n\r\nexport const useFavorites = (userId) => {\r\n  const { data, refetch } = useQuery(GET_FAVORITES, {\r\n    variables: { userId },\r\n  });\r\n\r\n  const [addFavoriteMutation] = useMutation(ADD_FAVORITE);// Mutation hook for adding a favorite\r\n  const [removeFavoriteMutation] = useMutation(REMOVE_FAVORITE);// Mutation hook for removing a favorite\r\n\r\n  const favorites = data?.favorites || [];// List of favorite products\r\n  const favoriteIds = favorites.map((f) => f.product.id);// List of favorite product IDs\r\n\r\n  const addFavorite = async (productId) => {\r\n    try {\r\n      await addFavoriteMutation({ variables: { productId, userId } });// Call addFavorite mutation\r\n      refetch();\r\n      return { success: true };\r\n    } catch (err) {\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const removeFavorite = async (productId) => { // Function to handle removing a favorite\r\n    try {\r\n      await removeFavoriteMutation({ variables: { productId, userId } });// Call removeFavorite mutation\r\n      refetch();\r\n      return { success: true };\r\n    } catch (err) {\r\n      return { success: false, error: err.message };\r\n    }\r\n  };\r\n\r\n  const toggleFavorite = async (productId) => { // Function to handle toggling a favorite\r\n    if (favoriteIds.includes(productId)) {\r\n      return await removeFavorite(productId);\r\n    } else {\r\n      return await addFavorite(productId);\r\n    }\r\n  };\r\n\r\n  const isFavorite = (productId) => favoriteIds.includes(productId);\r\n\r\n  return {\r\n    favorites,\r\n    favoriteIds,\r\n    addFavorite,\r\n    removeFavorite,\r\n    toggleFavorite,\r\n    isFavorite,\r\n  };\r\n};"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,gBAAgB;AACtD,SAASC,aAAa,QAAQ,oBAAoB;AAClD,SAASC,YAAY,EAAEC,eAAe,QAAQ,sBAAsB;AAEpE,OAAO,MAAMC,YAAY,GAAIC,MAAM,IAAK;EAAAC,EAAA;EACtC,MAAM;IAAEC,IAAI;IAAEC;EAAQ,CAAC,GAAGT,QAAQ,CAACE,aAAa,EAAE;IAChDQ,SAAS,EAAE;MAAEJ;IAAO;EACtB,CAAC,CAAC;EAEF,MAAM,CAACK,mBAAmB,CAAC,GAAGV,WAAW,CAACE,YAAY,CAAC,CAAC;EACxD,MAAM,CAACS,sBAAsB,CAAC,GAAGX,WAAW,CAACG,eAAe,CAAC,CAAC;;EAE9D,MAAMS,SAAS,GAAG,CAAAL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,SAAS,KAAI,EAAE,CAAC;EACxC,MAAMC,WAAW,GAAGD,SAAS,CAACE,GAAG,CAAEC,CAAC,IAAKA,CAAC,CAACC,OAAO,CAACC,EAAE,CAAC,CAAC;;EAEvD,MAAMC,WAAW,GAAG,MAAOC,SAAS,IAAK;IACvC,IAAI;MACF,MAAMT,mBAAmB,CAAC;QAAED,SAAS,EAAE;UAAEU,SAAS;UAAEd;QAAO;MAAE,CAAC,CAAC,CAAC;MAChEG,OAAO,CAAC,CAAC;MACT,OAAO;QAAEY,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEE,KAAK,EAAED,GAAG,CAACE;MAAQ,CAAC;IAC/C;EACF,CAAC;EAED,MAAMC,cAAc,GAAG,MAAOL,SAAS,IAAK;IAAE;IAC5C,IAAI;MACF,MAAMR,sBAAsB,CAAC;QAAEF,SAAS,EAAE;UAAEU,SAAS;UAAEd;QAAO;MAAE,CAAC,CAAC,CAAC;MACnEG,OAAO,CAAC,CAAC;MACT,OAAO;QAAEY,OAAO,EAAE;MAAK,CAAC;IAC1B,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZ,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEE,KAAK,EAAED,GAAG,CAACE;MAAQ,CAAC;IAC/C;EACF,CAAC;EAED,MAAME,cAAc,GAAG,MAAON,SAAS,IAAK;IAAE;IAC5C,IAAIN,WAAW,CAACa,QAAQ,CAACP,SAAS,CAAC,EAAE;MACnC,OAAO,MAAMK,cAAc,CAACL,SAAS,CAAC;IACxC,CAAC,MAAM;MACL,OAAO,MAAMD,WAAW,CAACC,SAAS,CAAC;IACrC;EACF,CAAC;EAED,MAAMQ,UAAU,GAAIR,SAAS,IAAKN,WAAW,CAACa,QAAQ,CAACP,SAAS,CAAC;EAEjE,OAAO;IACLP,SAAS;IACTC,WAAW;IACXK,WAAW;IACXM,cAAc;IACdC,cAAc;IACdE;EACF,CAAC;AACH,CAAC;AAACrB,EAAA,CAjDWF,YAAY;EAAA,QACGL,QAAQ,EAIJC,WAAW,EACRA,WAAW;AAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}